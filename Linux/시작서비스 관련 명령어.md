# ì‹œì‘ ì„œë¹„ìŠ¤ ê´€ë ¨ ëª…ë ¹ì–´


### ë¦¬ëˆ…ìŠ¤ì—ì„œ ì‹œì‘ ì„œë¹„ìŠ¤ë€?  
ë¶€íŒ…ì„ í•˜ë©´ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ë§í•œë‹¤.  
`systemctl` ì´ë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë¹„ìŠ¤ ë“±ë¡ / ìƒíƒœ í™•ì¸ / ì‚­ì œ ë“±ì„ í•  ìˆ˜ ìˆë‹¤.  
`systemctl` ëª…ë ¹ì–´ëŠ” root ì‚¬ìš©ìë§Œ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ `sudo` ë¥¼ ì•ì— ì‘ì„±í•˜ê±°ë‚˜ `root` ì‚¬ìš©ìë¡œ ë“¤ì–´ê°€ì„œ ëª…ë ¹ì–´ ì‹¤í–‰í•´ì•¼ í•¨.

ğŸ“Œ ë°°í¬íŒ ë³„ë¡œ ëª…ë ¹ì–´ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.
`systemctl` or `service` ë¡œ ë‚˜ë‰¨.


<br>


### ì‹œì‘ì„œë¹„ìŠ¤ ë“±ë¡
1. ìë™ìœ¼ë¡œ ì‹¤í–‰ë  ë°ëª¬ì„ ì‘ì„±í•œë‹¤  
/etc/systemd/system/ í•˜ìœ„ì— `{}.service` í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•œë‹¤.
test-case.service ë¼ê³  í•œë‹¤ë©´
    ```shell
    cat test-case.service 
    # ... ì„œë¹„ìŠ¤ ë‚´ìš© ì‘ì„± ...
    ``` 
2. ë°ëª¬ì„ ì‹œì‘í•˜ë„ë¡ í•œë‹¤
    ```shell
    sudo systemctl start test-case 
    ```
3. ì¬ë¶€íŒ… ì‹œì—ë„ ìë™ ì‹œì‘ì„ í•˜ë„ë¡ í•˜ê¸°
    ```shell
    sudo systemctl enable test-case
    ```

<br>

### ì‹œì‘ì„œë¹„ìŠ¤ ê´€ë ¨ ëª…ë ¹ì–´ë“¤

1. ì„œë¹„ìŠ¤ ê´€ë¦¬ ëª…ë ¹ì–´

   - ë“±ë¡ëœ ì„œë¹„ìŠ¤ í™•ì¸ (ì‹¤í–‰ë˜ì§€ ì•Šì€ ì„œë¹„ìŠ¤ê¹Œì§€ ë³´ê¸°)
       ```shell
       sudo systemctl list-unit-files
       # í˜¹ì€
       sudo systemctl list-units
       # í˜¹ì€ `ì„œë¹„ìŠ¤` ì¸ ê²ƒë§Œ ë³´ë ¤ë©´
       sudo systemctl list-units --type=service
       ```

   - ë“±ë¡ëœ ì„œë¹„ìŠ¤ ì¤‘ active ì„œë¹„ìŠ¤ ëª©ë¡ í™•ì¸
       ```shell
       sudo systemctl list-units --state=active
       ```
  
   - ë“±ë¡ëœ ì„œë¹„ìŠ¤ ì¤‘ ì‹¤íŒ¨í•œ ì„œë¹„ìŠ¤ ëª©ë¡ í™•ì¸
       ```shell
       sudo systemctl list-units --state=failed
       ```
  
   - ë“±ë¡ëœ ì„œë¹„ìŠ¤ ì¤‘ ì‹¤í–‰ì¤‘ì¸ ì„œë¹„ìŠ¤ ëª©ë¡ í™•ì¸
       ```shell
       sudo systemctl list-units --state=running --type=service
       ```
     
   - ì„œë¹„ìŠ¤ì™€ ê´€ë ¨ëœ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ ì£½ì´ê¸°
       ```shell
       sudo systemctl kill {ì„œë¹„ìŠ¤ëª…}
       ```
<br>     

2. ì„œë¹„ìŠ¤ ì‹¤í–‰ ê´€ë ¨ ëª…ë ¹ì–´  
   systemctl ë¡œ ì‹œì‘í•˜ì§€ ì•Šê³  service ë¡œ í•œë‹¤ë©´  
   `systemctl {ëª…ë ¹ì–´} {ì„œë¹„ìŠ¤ëª…}` ëŒ€ì‹  `service {ì„œë¹„ìŠ¤ëª…} {ëª…ë ¹ì–´}` ë¡œ ì“°ë©´ ëœë‹¤. 

     - ì„œë¹„ìŠ¤ ì‹¤í–‰/ì‹œì‘
        ```shell
        sudo systemctl start {ì„œë¹„ìŠ¤ëª…}
        ```

     - ì„œë¹„ìŠ¤ ì¢…ë£Œ/ì¤‘ì§€
         ```shell
         sudo systemctl stop {ì„œë¹„ìŠ¤ëª…}
         ```

     - ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
         ```shell
         sudo systemctl status {ì„œë¹„ìŠ¤ëª…}
         ```
      
     - ì„œë¹„ìŠ¤ ì¬ì‹œì‘
         ```shell
         sudo systemctl restart {ì„œë¹„ìŠ¤ëª…} 
         ```
     
     - ì„œë¹„ìŠ¤ ê°±ì‹ 
         ```shell
         sudo systemctl reload {ì„œë¹„ìŠ¤ëª…} 
         ```

<br>

3. ì„œë¹„ìŠ¤ ìë™ ì‹¤í–‰ ê´€ë ¨ ëª…ë ¹ì–´  
    ê° ëª…ë ¹ì–´ ì¤‘ ë°°í¬íŒì— ë§ëŠ” ëª…ë ¹ì–´ë¥¼ í•˜ë‚˜ ì„ íƒí•´ì„œ ì‚¬ìš©í•˜ë©´ ë¨. 
 
   - ì„œë¹„ìŠ¤ ìë™ì‹¤í–‰ í™œì„±í™”
       ```shell
       sudo systemctl enable {ì„œë¹„ìŠ¤ëª…} 
       sudo chkconfig {ì„œë¹„ìŠ¤ëª…} enable  
       ```
  
   - ì„œë¹„ìŠ¤ ìë™ì‹¤í–‰ ë¹„í™œì„±í™”(ì¤‘ì§€)
       ```shell
       sudo systemctl disable {ì„œë¹„ìŠ¤ëª…}
       sudo chkconfig {ì„œë¹„ìŠ¤ëª…} disable 
       ```
     
   - ì„œë¹„ìŠ¤ ìë™ì‹¤í–‰ ì—¬ë¶€ í™•ì¸
       ```shell
       sudo systemctl is-enabled {ì„œë¹„ìŠ¤ëª…}
       sudo chkconfig {ì„œë¹„ìŠ¤ëª…} --list
       ```
  

### systemctl restart vs reload ? 
restart :  ì„œë¹„ìŠ¤ë¥¼ ì¬ì‹œì‘ í•˜ê¸°. shutdown í›„ ë‹¤ì‹œ start

reload : .service ë¡œ ë“±ë¡ëœ config íŒŒì¼ì„ ë‹¤ì‹œ ë¡œë“œí•˜ë¼ëŠ” ëª…ë ¹. ì ì ˆí•˜ê²Œ reload ì•ˆ ë  ìˆ˜ ìˆë‹¤.

<br>
<br>
<br>
<br>
<br>
<br>

----
ì°¸ê³ 
- [ì„œë¹„ìŠ¤ ëª©ë¡ í™•ì¸ê³¼ ì„œë¹„ìŠ¤ ëª…ë ¹ì–´ë“¤, reloadì™€ restartì˜ ì°¨ì´ì ](https://fabxoe.tistory.com/130)
- [[Linux] CentOS 7 ì„œë¹„ìŠ¤ ê´€ë¦¬](https://ict-nroo.tistory.com/75)
- [Linux ë¶€íŒ… ì‹œ, ì„œë¹„ìŠ¤ ìë™ìœ¼ë¡œ ì‹œì‘í•˜ê¸°](https://jamesu.dev/posts/2019/12/20/starting-service-automatically-on-boot-in-linux/)

Advanced 
- [systemd ì„œë¹„ìŠ¤ unitíŒŒì¼ ì‘ì„±ì—ì„œ í–ˆë˜ ì‹¤ìˆ˜](https://springboot.cloud/16)
í™˜ê²½ ë³€ìˆ˜ ì ìš©ì´ ì•ˆë¨. nfs ê´€ë ¨ ë‚´ìš©ë„ ìˆê³  ì•Œì°¸!

